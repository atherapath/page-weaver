<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Green & Black Layout — Shell</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="site-header" role="banner" aria-label="Primary">
        <div class="header-inner" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;max-width:1100px;margin:0 auto;width:100%;">
            <div class="logo" aria-label="Spencer Log">
                <img src="assets/logo.jpg" alt="Spencer Log logo" width="128" height="128">
            </div>

            <!-- center title pulled from content.html -->
            <div id="site-title" class="site-title" aria-live="polite" aria-atomic="true"></div>

            <nav aria-label="Primary navigation">
                <button data-src="content.html" id="btn-content" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--black);padding:.45rem .8rem;border-radius:6px;cursor:pointer">Content</button>
            </nav>
        </div>
    </header>

    <main id="shell-main" style="flex:1 0 auto;padding:2rem;max-width:1100px;margin:0 auto;width:100%;">
        <div id="page-content" aria-live="polite">
            Loading content…
        </div>
    </main>

    <footer role="contentinfo" style="background:#07110a;color:var(--green);text-align:center;padding:.75rem 1rem;border-top:1px solid rgba(29,185,84,0.08);">
        © 2025 — Minimal Green & Black Template
    </footer>

    <script>
    // load content.html into #page-content by extracting its <main> if present
    async function loadContent(path = 'content.html') {
        const container = document.getElementById('page-content');
        const siteTitleEl = document.getElementById('site-title');
        container.textContent = 'Loading content…';
        try {
            const res = await fetch(path);
            if (!res.ok) throw new Error('Fetch failed: ' + res.status);
            const text = await res.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(text, 'text/html');

            // extract title: prefer main h1, then any h1, then [data-page-title], then <title>
            let titleText = '';
            const mainH1 = doc.querySelector('main h1');
            const anyH1 = doc.querySelector('h1');
            const dataTitle = doc.querySelector('[data-page-title]');
            if (mainH1) { titleText = mainH1.textContent.trim(); mainH1.remove(); }
            else if (anyH1) { titleText = anyH1.textContent.trim(); anyH1.remove(); }
            else if (dataTitle) { titleText = dataTitle.getAttribute('data-page-title').trim(); dataTitle.remove(); }
            else if (doc.title) { titleText = doc.title.trim(); }

            siteTitleEl.textContent = titleText;

            // prefer the main element of the external file, otherwise use body
            const injected = doc.querySelector('main') || doc.body;
            container.innerHTML = injected ? injected.innerHTML : text;

            // optionally run inline scripts from content.html (if any)
            container.querySelectorAll('script').forEach(oldScript => {
                const s = document.createElement('script');
                if (oldScript.src) s.src = oldScript.src;
                s.textContent = oldScript.textContent;
                document.body.appendChild(s).remove();
            });
        } catch (err) {
            // fetch may be blocked on file:// — fallback to iframe
            console.warn('Fetch failed, falling back to iframe:', err);
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = path;
            iframe.title = 'Content';
            iframe.style = 'width:100%;min-height:360px;border:0;border-radius:8px;overflow:hidden';
            container.appendChild(iframe);
        }
    }

    // initial load
    loadContent('content.html');

    // nav button behavior (loads other content files when added)
    document.querySelectorAll('button[data-src]').forEach(btn => {
        btn.addEventListener('click', () => {
            const src = btn.getAttribute('data-src');
            loadContent(src);
        });
    });
    </script>
</body>
</html>